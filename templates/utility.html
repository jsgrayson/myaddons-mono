{% extends "base.html" %}

{% block title %}Utility Tracker{% endblock %}

{% block content %}
<div class="row mb-5">
    <div class="col-md-12">
        <div class="hero-header p-5 text-center">
            <h1 class="display-3 fw-bold mb-3 hero-title">ðŸŽ’ Utility Tracker</h1>
            <p class="lead hero-subtitle mb-0">
                <i class="fas fa-box-open me-2"></i>Collection progress & missing item hunter
            </p>
            <div class="animated-border mt-4"></div>
        </div>
    </div>
</div>

<!-- Collection Overview -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card bg-dark border-success h-100">
            <div class="card-body text-center">
                <h5 class="card-title text-success"><i class="fas fa-horse me-2"></i>Mounts</h5>
                <h2 class="display-4">{{ summary.mounts.percent }}%</h2>
                <p class="text-muted">{{ summary.mounts.owned }} / {{ summary.mounts.total }} Owned</p>
                <div class="progress" style="height: 5px;">
                    <div class="progress-bar bg-success" style="width: {{ summary.mounts.percent }}%"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-dark border-info h-100">
            <div class="card-body text-center">
                <h5 class="card-title text-info"><i class="fas fa-dice me-2"></i>Toys</h5>
                <h2 class="display-4">{{ summary.toys.percent }}%</h2>
                <p class="text-muted">{{ summary.toys.owned }} / {{ summary.toys.total }} Owned</p>
                <div class="progress" style="height: 5px;">
                    <div class="progress-bar bg-info" style="width: {{ summary.toys.percent }}%"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-dark border-warning h-100">
            <div class="card-body text-center">
                <h5 class="card-title text-warning"><i class="fas fa-magic me-2"></i>Spells</h5>
                <h2 class="display-4">{{ summary.spells.percent }}%</h2>
                <p class="text-muted">{{ summary.spells.owned }} / {{ summary.spells.total }} Owned</p>
                <div class="progress" style="height: 5px;">
                    <div class="progress-bar bg-warning" style="width: {{ summary.spells.percent }}%"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-dark border-danger h-100">
            <div class="card-body text-center">
                <h5 class="card-title text-danger"><i class="fas fa-tshirt me-2"></i>Transmog</h5>
                <h2 class="display-4">{{ summary.transmog.percent }}%</h2>
                <p class="text-muted">{{ summary.transmog.owned }} / {{ summary.transmog.total }} Owned</p>
                <div class="progress" style="height: 5px;">
                    <div class="progress-bar bg-danger" style="width: {{ summary.transmog.percent }}%"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Missing Items Hunter -->
<div class="row">
    <div class="col-md-12">
        <div class="card bg-dark">
            <div class="card-header border-bottom border-secondary">
                <h4 class="mb-0 text-white"><i class="fas fa-search me-2"></i>Easy Wins (Missing Mounts)</h4>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-dark table-hover mb-0 align-middle">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Source</th>
                                <th>Expansion</th>
                                <th>Difficulty</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in missing_mounts %}
                            <tr>
                                <td class="fw-bold text-white">{{ item.name }}</td>
                                <td>{{ item.source }}</td>
                                <td><span class="badge bg-secondary">{{ item.expansion }}</span></td>
                                <td>
                                    {% if item.difficulty == 'Easy' %}
                                    <span class="badge bg-success">Easy</span>
                                    {% elif item.difficulty == 'Medium' %}
                                    <span class="badge bg-warning text-dark">Medium</span>
                                    {% else %}
                                    <span class="badge bg-danger">Hard</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <a href="https://www.wowhead.com/item={{ item.id }}" target="_blank"
                                        class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-external-link-alt"></i> Guide
                                    </a>
                                </td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="5" class="text-center py-4 text-muted">No missing mounts found!</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}